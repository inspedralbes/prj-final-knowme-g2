---
import EditPortfolioLayout from "../layouts/EditPortfolioLayout.astro";
import { ShowPortfolio } from "../components/ShowPortfolio.jsx";
import { getProbes, getProba } from "../../communicationManager.js";


export const prerender = true;

// A docker compose dona error de connexiÃ³ si es proba amb el Strapi
const { id } = Astro.params;

let jsonData;

if (id) {
  jsonData = await getProba(id);
}

export async function getStaticPaths() {
  const data = await getProbes();

  return data.map((info) => {
    return {
      params: { id: info.id },
    };
  });
}
---

<EditPortfolioLayout title={jsonData.attributes.proba}>
  <main class="h-max w-screen">
    <div class="flex">
      <ShowPortfolio jsonData={jsonData}/>
    </div>
  </main>
</EditPortfolioLayout>